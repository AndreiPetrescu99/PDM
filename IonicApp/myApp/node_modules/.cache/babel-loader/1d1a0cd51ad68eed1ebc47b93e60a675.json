{"ast":null,"code":"var _jsxFileName = \"D:\\\\PDM\\\\IonicApp\\\\myApp\\\\src\\\\todo\\\\BuyTicket.tsx\";\nimport { getLogger } from \"../core\";\nimport React, { useContext, useEffect, useState } from \"react\";\nimport { TrainContext } from \"./TrainProvider\";\nimport { IonButton, IonButtons, IonContent, IonHeader, IonLoading, IonPage, IonTitle } from \"@ionic/react\";\nimport { TrainDetails } from \"./Train\";\nconst log = getLogger('BuyTicket');\n\nconst BuyTicket = ({\n  history,\n  match\n}) => {\n  const {\n    trains,\n    buying,\n    buyingError,\n    buyTicket\n  } = useContext(TrainContext);\n  const [text, setText] = useState('');\n  const [train, setTrain] = useState();\n  useEffect(() => {\n    log('useEffect');\n    const routeId = match.params.id || '';\n    const train = trains === null || trains === void 0 ? void 0 : trains.find(it => it.id = routeId);\n    setTrain(train);\n  }, [match.params.id, trains]);\n\n  const handleBuy = () => {\n    if (train) {\n      buyTicket && buyTicket(train).then(() => history.goBack());\n    } else log(\"Nu este ales tren\");\n  };\n\n  log('render BuyTicket');\n  return /*#__PURE__*/React.createElement(IonPage, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(IonHeader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(IonTitle, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 17\n    }\n  }, \"Buy Ticket\"), /*#__PURE__*/React.createElement(IonButtons, {\n    slot: \"end\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(IonButton, {\n    onClick: handleBuy,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 21\n    }\n  }, \"Buy\"))), /*#__PURE__*/React.createElement(IonContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 13\n    }\n  }, train && /*#__PURE__*/React.createElement(TrainDetails, {\n    from: train.from,\n    to: train.to,\n    nrSeats: train.nrSeats,\n    timeArrive: train.timeArrive,\n    timeLeave: train.timeLeave,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(IonLoading, {\n    isOpen: buying,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 17\n    }\n  }), buyingError && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 21\n    }\n  }, buyingError.message || 'Failed to save item')));\n};\n\nexport default BuyTicket;","map":{"version":3,"sources":["D:/PDM/IonicApp/myApp/src/todo/BuyTicket.tsx"],"names":["getLogger","React","useContext","useEffect","useState","TrainContext","IonButton","IonButtons","IonContent","IonHeader","IonLoading","IonPage","IonTitle","TrainDetails","log","BuyTicket","history","match","trains","buying","buyingError","buyTicket","text","setText","train","setTrain","routeId","params","id","find","it","handleBuy","then","goBack","from","to","nrSeats","timeArrive","timeLeave","message"],"mappings":"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","sourcesContent":["import {getLogger} from \"../core\";\r\nimport {RouteComponentProps} from \"react-router\";\r\nimport React, {useContext, useEffect, useState} from \"react\";\r\nimport {TrainContext} from \"./TrainProvider\";\r\nimport {TrainProps} from \"./TrainProps\";\r\nimport {IonButton, IonButtons, IonContent, IonHeader, IonLoading, IonPage, IonTitle} from \"@ionic/react\";\r\nimport {TrainDetails} from \"./Train\";\r\n\r\nconst log = getLogger('BuyTicket');\r\n\r\ninterface BuyTicketProps extends RouteComponentProps<{\r\n    id?: string;\r\n}>{}\r\n\r\nconst BuyTicket: React.FC<BuyTicketProps> = ({history, match}) =>{\r\n    const {trains, buying, buyingError, buyTicket} = useContext(TrainContext);\r\n    const [text, setText] = useState('');\r\n    const [train, setTrain] = useState<TrainProps>();\r\n    useEffect(()=>{\r\n        log('useEffect');\r\n        const routeId = match.params.id || '';\r\n        const train = trains?.find(it => it.id = routeId);\r\n        setTrain(train);\r\n    }, [match.params.id, trains]);\r\n    const handleBuy = () => {\r\n        if(train) {\r\n            buyTicket && buyTicket(train).then(() => history.goBack());\r\n        }else log(\"Nu este ales tren\");\r\n    };\r\n    log('render BuyTicket');\r\n    return (\r\n        <IonPage>\r\n            <IonHeader>\r\n                <IonTitle>Buy Ticket</IonTitle>\r\n                <IonButtons slot = \"end\">\r\n                    <IonButton onClick={handleBuy}>\r\n                        Buy\r\n                    </IonButton>\r\n                </IonButtons>\r\n            </IonHeader>\r\n            <IonContent>\r\n                {train && (\r\n                    <TrainDetails from={train.from} to={train.to} nrSeats={train.nrSeats} timeArrive={train.timeArrive} timeLeave={train.timeLeave}/>\r\n                )}\r\n                <IonLoading isOpen = {buying}/>\r\n                {buyingError && (\r\n                    <div>{buyingError.message || 'Failed to save item'}</div>\r\n                )}\r\n            </IonContent>\r\n        </IonPage>\r\n    );\r\n}\r\n\r\nexport default BuyTicket;"]},"metadata":{},"sourceType":"module"}