{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/auth/index.js","webpack:///./src/auth/router.js","webpack:///./src/auth/store.js","webpack:///./src/index.js","webpack:///./src/train/index.js","webpack:///./src/train/router.js","webpack:///./src/train/store.js","webpack:///./src/utils/constants.js","webpack:///./src/utils/index.js","webpack:///./src/utils/middleware.js","webpack:///./src/utils/upload.js","webpack:///./src/utils/wss.js","webpack:///external \"@koa/cors\"","webpack:///external \"fs\"","webpack:///external \"http\"","webpack:///external \"jsonwebtoken\"","webpack:///external \"koa\"","webpack:///external \"koa-bodyparser\"","webpack:///external \"koa-jwt\"","webpack:///external \"koa-router\"","webpack:///external \"multer\"","webpack:///external \"nedb-promise\"","webpack:///external \"path\"","webpack:///external \"upload.js\"","webpack:///external \"ws\""],"names":["router","Router","createToken","user","jwt","sign","username","_id","jwtConfig","secret","expiresIn","createUser","response","userStore","insert","body","token","status","err","issue","error","message","post","ctx","request","credentials","findOne","password","UserStore","constructor","filename","autoload","store","dataStore","props","app","Koa","server","http","createServer","callback","wss","WebSocket","Server","upload","require","initWss","use","cors","timingLogger","exceptionHandler","bodyParser","koaBody","multipart","prefix","publicApiRouter","authRouter","routes","allowedMethods","protectedApiRouter","trainRouter","listen","console","log","path","fs","multer","get","from","state","id","trains","trainStore","find","page","params","maxPage","crPage","cr","out","i","length","Number","push","JSON","stringify","userId","train","put","nrSeats","updatedCount","update","broadcast","event","payload","createTrain","type","uploadImg","del","note","remove","TrainStore","next","start","Date","now","method","url","UPLOAD","IMAGE","FILE","MAXFILESIZE","mkdirFile","pathList","split","fileDir","forEach","existsSync","mkdirSync","LogFile","info","saveFile","file","Promise","resolve","reject","render","createReadStream","upStream","createWriteStream","pipe","on","time","parse","files","fileName","tail","name","pop","filePath","join","fileYear","then","su","uplaod_img","substring","error_code","error_message","realName","catch","module","exports","value","ws","close","verify","data","clients","client","readyState","OPEN","send"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","export * from './router';","import Router from 'koa-router';\r\nimport userStore from './store';\r\nimport jwt from 'jsonwebtoken';\r\nimport { jwtConfig } from '../utils';\r\n\r\nexport const router = new Router();\r\n\r\nconst createToken = (user) => {\r\n    return jwt.sign({ username: user.username, _id: user._id }, jwtConfig.secret, { expiresIn: 60 * 60 * 60 });\r\n};\r\n\r\nconst createUser = async (user, response) => {\r\n    try {\r\n        await userStore.insert(user);\r\n        response.body = { token: createToken(user) };\r\n        response.status = 201; // created\r\n    } catch (err) {\r\n        response.body = { issue: [{ error: err.message }] };\r\n        response.status = 400; // bad request\r\n    }\r\n};\r\n\r\nrouter.post('/signup', async (ctx) => await createUser(ctx.request.body, ctx.response));\r\n\r\nrouter.post('/login', async (ctx) => {\r\n    const credentials = ctx.request.body;\r\n    const response = ctx.response;\r\n    const user = await userStore.findOne({ username: credentials.username });\r\n    if (user && credentials.password === user.password) {\r\n        response.body = { token: createToken(user) };\r\n        response.status = 201; // created\r\n    } else {\r\n        response.body = { issue: [{ error: 'Invalid credentials' }] };\r\n        response.status = 400; // bad request\r\n    }\r\n});\r\n","import dataStore from 'nedb-promise';\r\n\r\nexport class UserStore {\r\n    constructor({ filename, autoload }) {\r\n        this.store = dataStore({ filename, autoload });\r\n    }\r\n\r\n    async findOne(props) {\r\n        return this.store.findOne(props);\r\n    }\r\n\r\n    async insert(user) {\r\n        //\r\n        return this.store.insert(user);\r\n    };\r\n}\r\n\r\nexport default new UserStore({ filename: './db/users.json', autoload: true });","import Koa from 'koa';\r\nimport WebSocket from 'ws';\r\nimport http from 'http';\r\nimport Router from 'koa-router';\r\nimport koaBody from 'koa-bodyparser'\r\nimport bodyParser from \"koa-bodyparser\";\r\nimport { timingLogger, exceptionHandler, jwtConfig, initWss, verifyClient } from './utils';\r\nimport { router as authRouter } from './auth';\r\nimport { router as trainRouter } from \"./train\";\r\nimport trainStore from './train/store';\r\nimport jwt from 'koa-jwt';\r\nimport cors from '@koa/cors';\r\n\r\nconst app = new Koa();\r\nconst server = http.createServer(app.callback());\r\nconst wss = new WebSocket.Server({ server });\r\n\r\nconst {upload}= require('upload.js')\r\ninitWss(wss);\r\n\r\napp.use(cors());\r\napp.use(timingLogger);\r\napp.use(exceptionHandler);\r\napp.use(bodyParser());\r\napp.use(koaBody({ multipart: true }));\r\n\r\nconst prefix = '/api';\r\n\r\n// public\r\nconst publicApiRouter = new Router({ prefix });\r\npublicApiRouter\r\n    .use('/auth', authRouter.routes());\r\napp\r\n    .use(publicApiRouter.routes())\r\n    .use(publicApiRouter.allowedMethods());\r\n\r\napp.use(jwt(jwtConfig));\r\n\r\nconst protectedApiRouter = new Router({ prefix });\r\nprotectedApiRouter\r\n    .use('/train', trainRouter.routes());\r\napp\r\n    .use(protectedApiRouter.routes())\r\n    .use(protectedApiRouter.allowedMethods());\r\n\r\n// app.use(upload()) //  Route\r\n// app.use(route).use(router.post('/upload',upload));\r\n\r\nserver.listen(3000);\r\nconsole.log('started on port 3000');\r\n","export * from './router';","import Router from 'koa-router';\r\nimport trainStore from './store';\r\nimport { broadcast } from \"../utils\";\r\nimport {uploadImg} from \"../utils/upload\";\r\n\r\n\r\nconst path = require(\"path\");\r\nconst fs = require(\"fs\");\r\nconst multer = require(\"multer\");\r\n\r\n\r\nexport const router = new Router();\r\n\r\n\r\nrouter.get('/', async (ctx) => {\r\n    const response = ctx.response;\r\n    const from = ctx.state.user.from;\r\n    const id = ctx.state.user._id;\r\n    let trains = await trainStore.find();\r\n    response.body = trains;\r\n    response.status = 200; // ok\r\n});\r\n\r\nrouter.get('/page/:id', async (ctx) =>{\r\n   const response = ctx.response;\r\n   let page = ctx.params.id;\r\n   console.log(\"Page \" + page);\r\n   let maxPage = 20;\r\n   let crPage = 1;\r\n   let cr = 0;\r\n   let trains = await trainStore.find();\r\n   let out = []\r\n   for(let i = 0; i<trains.length; i++){\r\n       if(cr === maxPage - 1){\r\n           //console.log(cr);\r\n           cr = 0;\r\n           crPage = crPage + 1;\r\n       }\r\n       console.log(crPage);\r\n       if(crPage === Number(page)){\r\n           //console.log(\"AICI\");\r\n           //console.log(trains[i]);\r\n           out.push(trains[i]);\r\n       }\r\n       cr = cr + 1;\r\n   }\r\n   //console.log(out);\r\n   response.body = JSON.stringify(out);\r\n   response.status = 200;\r\n});\r\n\r\n\r\nrouter.get('/:id', async (ctx) => {\r\n    const userId = ctx.state.user._id;\r\n    const train = await trainStore.findOne({ _id: ctx.params.id });\r\n    const response = ctx.response;\r\n    if (train) {\r\n        response.body = train;\r\n        response.status = 200; // ok\r\n    } else {\r\n        response.status = 404; // not found\r\n    }\r\n});\r\n\r\nrouter.put('/:id', async (ctx) => {\r\n    console.log(\"PUT METHOD\");\r\n    let train = ctx.request.body;\r\n    //console.log(train);\r\n    train.nrSeats = train.nrSeats - 1;\r\n    const id = ctx.params.id;\r\n    const response = ctx.response;\r\n    const userId = ctx.state.user._id;\r\n    //let found = await trainStore.findOne({_id:id});\r\n\r\n    try {\r\n        const updatedCount = await trainStore.update({_id: id}, train);\r\n        console.log(updatedCount);\r\n        ctx.response.body = train;\r\n        ctx.response.status = 200; // ok\r\n        console.log(response);\r\n        console.log(train);\r\n        broadcast(userId, { event: 'updated', payload: train });\r\n    }catch (error){\r\n        console.log(error);\r\n    }\r\n\r\n\r\n});\r\n\r\nconst createTrain = async (ctx, train, response) => {\r\n    try {\r\n        const userId = ctx.state.user._id;\r\n        console.log(userId);\r\n        const from = ctx.state.user.from;\r\n        response.body = await trainStore.insert(train);\r\n        response.status = 201; // created\r\n        broadcast(userId, { type: 'created', payload: train });\r\n    } catch (err) {\r\n        response.body = { message: err.message };\r\n        response.status = 400; // bad request\r\n    }\r\n};\r\n\r\nrouter.post('/', async ctx => await createTrain(ctx, ctx.request.body, ctx.response));\r\n\r\nrouter.post('/upload', uploadImg)\r\n\r\n\r\n\r\nrouter.del('/:id', async (ctx) => {\r\n    const userId = ctx.state.user._id;\r\n    const note = await trainStore.findOne({ _id: ctx.params.id });\r\n    if (note && userId !== note.userId) {\r\n        ctx.response.status = 403; // forbidden\r\n    } else {\r\n        await trainStore.remove({ _id: ctx.params.id });\r\n        ctx.response.status = 204; // no content\r\n    }\r\n});\r\n","import dataStore from 'nedb-promise';\r\n\r\nexport class TrainStore {\r\n    constructor({ filename, autoload }) {\r\n        this.store = dataStore({ filename, autoload });\r\n    }\r\n\r\n\r\n    async find(props) {\r\n        return this.store.find(props);\r\n    }\r\n\r\n    async findOne(props) {\r\n        return this.store.findOne(props);\r\n    }\r\n\r\n    async insert(note) {\r\n        return this.store.insert(note);\r\n    };\r\n\r\n    async update(props, note) {\r\n        return this.store.update(props, note);\r\n    }\r\n\r\n    async remove(props) {\r\n        return this.store.remove(props);\r\n    }\r\n}\r\n\r\nexport default new TrainStore({ filename: './db/trains.json', autoload: true });","export const jwtConfig = { secret: 'my-secret' };\r\n","export * from './constants';\r\nexport * from './middleware';\r\nexport * from './wss';\r\n","export const exceptionHandler = async (ctx, next) => {\r\n    try {\r\n        return await next();\r\n    } catch (err) {\r\n        ctx.body = { message: err.message || 'Unexpected error.' };\r\n        ctx.status = err.status || 500;\r\n    }\r\n};\r\n\r\nexport const timingLogger = async (ctx, next) => {\r\n    const start = Date.now();\r\n    await next();\r\n    console.log(`${ctx.method} ${ctx.url} => ${ctx.response.status}, ${Date.now() - start}ms`);\r\n};\r\n","/*\r\n    File upload\r\n */\r\nconst fs = require('fs');\r\nconst path = require('path');\r\n// const dateFormat = require('../utils/dateFormat.js')\r\nconst upload= {\r\n    UPLOAD: '/upload',\r\n    IMAGE: '/image/',\r\n    FILE: '/file/',\r\n    MAXFILESIZE: 200 * 1024 * 1024, //Upload file size\r\n}\r\n// Create a file directory\r\nconst mkdirFile = (path) => {\r\n    let pathList = path.split('/');\r\n    let fileDir = ''\r\n    pathList.forEach(i => {\r\n        if(i) {\r\n            fileDir += ('/' + i)\r\n            if(!fs.existsSync(fileDir)) {\r\n                fs.mkdirSync(fileDir, err => {\r\n                    LogFile.info('Create failure', err)\r\n                    return\r\n                });\r\n            }\r\n        }\r\n    })\r\n}\r\n//Save file\r\nconst saveFile = (file, path) => {\r\n    return new Promise((resolve, reject) => {\r\n        let render = fs.createReadStream(file);\r\n        // Create a write stream\r\n        let upStream = fs.createWriteStream(path);\r\n        render.pipe(upStream);\r\n        upStream.on('finish', () => {\r\n            resolve(path)\r\n        });\r\n        upStream.on('error', (err) => {\r\n            reject(err)\r\n        });\r\n    })\r\n}\r\n\r\n/**\r\n * File upload\r\n * ps Generate file name SKD_date\r\n *     File paths are stored according to year and month\r\n */\r\nconst uploadImg = async ctx => {\r\n    console.log(ctx);\r\n    var time = Date.parse(new Date())\r\n    //let date = dateFormat.dateFormat(time, 'yyyyMMddhhmmss');\r\n    let file = ctx.request.files.file;\r\n    let fileName = 'SKD_ '+ upload.UPLOAD + upload.IMAGE //Upload and save directory\r\n    //let fileYear = date.substring(4, 8) + '/' +\r\n        //date.substring(8, 10);\r\n    let tail = file.name == 'blob' ? 'png' : file.name.split('.').pop()\r\n    let filePath = path.join(fileName + '.' + tail); //Stitching file names according to time\r\n    await mkdirFile(fileName + fileYear)         //Create a file directory\r\n    await saveFile(file.path, filePath).then(su => {\r\n        let uplaod_img = su.substring(upload.UPLOAD.length, su.length)\r\n        ctx.body = {\r\n            error_code: 10000,\r\n            error_message: 'Successful upload of files',\r\n            realName: uplaod_img,\r\n        }\r\n    }).catch(err => {\r\n        ctx.body = {\r\n            error_code: 20008,\r\n            error_message: 'Failed to upload file!',\r\n        }\r\n    })\r\n}\r\n\r\nmodule.exports = {\r\n    uploadImg\r\n};","import WebSocket from \"ws\";\r\nimport jwt from \"jsonwebtoken\";\r\nimport { jwtConfig } from \"./constants\";\r\n\r\nlet wss;\r\n\r\nexport const initWss = value => {\r\n    wss = value;\r\n    wss.on('connection', ws => {\r\n        ws.on('message', message => {\r\n            const { type, payload: { token } } = JSON.parse(message);\r\n            if (type !== 'authorization') {\r\n                ws.close();\r\n                return;\r\n            }\r\n            try {\r\n                ws.user = jwt.verify(token, jwtConfig.secret);\r\n            } catch (err) {\r\n                ws.close();\r\n            }\r\n        })\r\n    });\r\n};\r\n\r\nexport const broadcast = (userId, data) => {\r\n    console.log(\"Broadcasting all...\");\r\n    if (!wss) {\r\n        console.log(\"No wss\");\r\n        return;\r\n    }\r\n    //console.log(wss.clients.size);\r\n    wss.clients.forEach(client => {\r\n        //console.log(client);\r\n        if (client.readyState === WebSocket.OPEN) {\r\n            //console.log(`broadcast sent to ${client.user.username}`);\r\n            client.send(JSON.stringify(data));\r\n            console.log(\"Data sent\");\r\n        }\r\n    });\r\n};\r\n","module.exports = require(\"@koa/cors\");","module.exports = require(\"fs\");","module.exports = require(\"http\");","module.exports = require(\"jsonwebtoken\");","module.exports = require(\"koa\");","module.exports = require(\"koa-bodyparser\");","module.exports = require(\"koa-jwt\");","module.exports = require(\"koa-router\");","module.exports = require(\"multer\");","module.exports = require(\"nedb-promise\");","module.exports = require(\"path\");","module.exports = require(\"upload.js\");","module.exports = require(\"ws\");"],"sourceRoot":""}