{"ast":null,"code":"var _jsxFileName = \"D:\\\\PDM\\\\IonicApp\\\\myApp\\\\src\\\\todo\\\\BuyTicket.tsx\";\nimport { getLogger } from \"../core\";\nimport React, { useContext, useEffect, useState } from \"react\";\nimport { TrainContext } from \"./TrainProvider\";\nimport { IonContent, IonFab, IonFabButton, IonHeader, IonIcon, IonLoading, IonPage, IonTitle } from \"@ionic/react\";\nimport { TrainDetails } from \"./Train\";\nimport { add } from \"ionicons/icons\";\nconst log = getLogger('BuyTicket');\n\nconst BuyTicket = ({\n  history,\n  match\n}) => {\n  const {\n    buying,\n    buyingError,\n    buyTicket\n  } = useContext(TrainContext);\n  const [text, setText] = useState('');\n  const [train, setTrain] = useState();\n  const trains = [];\n  useEffect(() => {\n    log('useEffect');\n    const routeId = match.params.id || '';\n    log(trains);\n    const train = trains === null || trains === void 0 ? void 0 : trains.find(it => it.id = routeId);\n    log(train);\n    setTrain(train);\n  }, [match.params.id, trains]);\n\n  const handleBuy = () => {\n    if (train) {\n      buyTicket && buyTicket(train).then(() => history.goBack());\n    } else log(\"Nu este ales tren\");\n  }; //log(train);\n\n\n  log('render BuyTicket');\n  return /*#__PURE__*/React.createElement(IonPage, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(IonHeader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(IonTitle, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 17\n    }\n  }, \"Buy Ticket\")), /*#__PURE__*/React.createElement(IonContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }\n  }, train && /*#__PURE__*/React.createElement(TrainDetails, {\n    key: train.id,\n    from: train.from,\n    to: train.to,\n    nrSeats: train.nrSeats,\n    timeArrive: train.timeArrive,\n    timeLeave: train.timeLeave,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(IonLoading, {\n    isOpen: buying,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 17\n    }\n  }), buyingError && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 21\n    }\n  }, buyingError.message || 'Failed to save item'), /*#__PURE__*/React.createElement(IonFab, {\n    vertical: \"bottom\",\n    horizontal: \"end\",\n    slot: \"fixed\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(IonFabButton, {\n    onClick: handleBuy,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(IonIcon, {\n    icon: add,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 25\n    }\n  })))));\n};\n\nexport default BuyTicket;","map":{"version":3,"sources":["D:/PDM/IonicApp/myApp/src/todo/BuyTicket.tsx"],"names":["getLogger","React","useContext","useEffect","useState","TrainContext","IonContent","IonFab","IonFabButton","IonHeader","IonIcon","IonLoading","IonPage","IonTitle","TrainDetails","add","log","BuyTicket","history","match","buying","buyingError","buyTicket","text","setText","train","setTrain","trains","routeId","params","id","find","it","handleBuy","then","goBack","from","to","nrSeats","timeArrive","timeLeave","message"],"mappings":"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","sourcesContent":["import {getLogger} from \"../core\";\r\nimport {RouteComponentProps} from \"react-router\";\r\nimport React, {useContext, useEffect, useState} from \"react\";\r\nimport {TrainContext} from \"./TrainProvider\";\r\nimport {TrainProps} from \"./TrainProps\";\r\nimport {\r\n    IonButton,\r\n    IonButtons,\r\n    IonContent, IonFab,\r\n    IonFabButton,\r\n    IonHeader,\r\n    IonIcon,\r\n    IonLoading,\r\n    IonPage,\r\n    IonTitle\r\n} from \"@ionic/react\";\r\nimport {TrainDetails} from \"./Train\";\r\nimport {add} from \"ionicons/icons\";\r\nimport {getTrains} from \"./TrainsAPI\";\r\n\r\nconst log = getLogger('BuyTicket');\r\n\r\ninterface BuyTicketProps extends RouteComponentProps<{\r\n    id?: string;\r\n}>{}\r\n\r\nconst BuyTicket: React.FC<BuyTicketProps> = ({history, match}) =>{\r\n    const {buying, buyingError, buyTicket} = useContext(TrainContext);\r\n    const [text, setText] = useState('');\r\n    const [train, setTrain] = useState<TrainProps>();\r\n    const trains: any[] = [];\r\n    useEffect(()=>{\r\n        log('useEffect');\r\n        const routeId = match.params.id || '';\r\n        log(trains);\r\n        const train = trains?.find(it => it.id = routeId);\r\n        log(train);\r\n        setTrain(train);\r\n    }, [match.params.id, trains]);\r\n    const handleBuy = () => {\r\n        if(train) {\r\n            buyTicket && buyTicket(train).then(() => history.goBack());\r\n        }else log(\"Nu este ales tren\");\r\n    };\r\n    //log(train);\r\n    log('render BuyTicket');\r\n    return (\r\n        <IonPage>\r\n            <IonHeader>\r\n                <IonTitle>Buy Ticket</IonTitle>\r\n            </IonHeader>\r\n            <IonContent>\r\n                {train && (\r\n                    <TrainDetails key ={train.id} from={train.from} to={train.to} nrSeats={train.nrSeats} timeArrive={train.timeArrive} timeLeave={train.timeLeave}/>\r\n                )}\r\n                <IonLoading isOpen = {buying}/>\r\n                {buyingError && (\r\n                    <div>{buyingError.message || 'Failed to save item'}</div>\r\n                )}\r\n\r\n                <IonFab vertical=\"bottom\" horizontal=\"end\" slot=\"fixed\">\r\n                    <IonFabButton onClick={handleBuy}>\r\n                        <IonIcon icon={add} />\r\n                    </IonFabButton>\r\n                </IonFab>\r\n            </IonContent>\r\n        </IonPage>\r\n    );\r\n}\r\n\r\nexport default BuyTicket;"]},"metadata":{},"sourceType":"module"}